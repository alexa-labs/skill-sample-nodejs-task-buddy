const { SkillResumptionAPIManager } = require('./APIManager');

// look up these from dynamo user table
/**
    persistentAttributes.sessionId = handlerInput.requestEnvelope.session.sessionId;
    persistentAttributes.apiAccessToken = handlerInput.requestEnvelope.context.System.apiAccessToken;
 */
const sessionId = 'amzn1.echo-api.session.8cadf5e2-5166-425d-b34e-bb2ece7dbe72'; // sessionId to be resumed
// eslint-disable-next-line max-len
const apiAccessToken = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjEifQ.eyJhdWQiOiJodHRwczovL2FwaS5hbWF6b25hbGV4YS5jb20iLCJpc3MiOiJBbGV4YVNraWxsS2l0Iiwic3ViIjoiYW16bjEuYXNrLnNraWxsLjQyMWE3NWY5LWRkZTAtNDZjNS1hNjI1LWMwODE1NWFiYmQ2ZiIsImV4cCI6MTYxNzE0MjU5OCwiaWF0IjoxNjE3MTQyMjk4LCJuYmYiOjE2MTcxNDIyOTgsInByaXZhdGVDbGFpbXMiOnsiY29udGV4dCI6IkFBQUFBQUFBQUFBSjIzYk03RXp0R2xqSDhWTlp2elNCYWdFQUFBQUFBQUFDdjduMHlLbGRVOXNrVG9OSHFJNHBud2hVYStDSlg5aXRQMi9ramk1cGYxNlV6ZjhaYzF2MEJMZkM4R2NlZEpxbTNoblRSZ25yekdMRVRVR1o2YjhNVHd1aDNna3dqcHZnQWdsU05NNG9URFBwaFY4NGY3WlhaRm1TMXVNdlU4SEI4SmQwQVlzVjUrKzlaUktIMFRzdG5BMGNqMVViMFFLa01iS3Z4VHVVOTI1cCszUi9GYjF1SzAvc2ROMEU5UE9aZzlDcHJMRXI4MWdWdUVJV29DU09DQW9sc2YrMklkTm54b2lBNFJqWVJpS2s0ZEl6alFYMldjREVWNFlKSDMzZGRUSkJYVlVOTjMvK2FWeE1rUWxVR3dMbU5aNy9nVHFmSzJQOHdGMGlVNlozbDgxV0doUDF4WTFuT0EwUFNBQW1IS2lYcFNZdzErVDJndE1yUlBHWjloSmdyM2t6aC9UeXpXa1oxaG9VbkRublBhdkdsRkgrSXZRRG1JdVUzajRGTFhLTDVFcWpKdjJDWEp5YnNJOFNkYjFrcW1xMzJPNW56U2tMS013RUpOZ04ybmsvdnFTRjRTampweTBzbTBDRHBTVkgwUFVhbkV6K2hSR3BrVjI3TW0xQ29ZYUpINkhXT2c9PSIsImNvbnNlbnRUb2tlbiI6IkF0emF8SXdFQklMczNmMXoyc0NIcllGcGJWTkdoMURDYVkyaDFIemJEai1TdmdENnBfTTVkMU9zM1EzSWkxMV9kQnplOTd2UFVDVUdiWHEyb3MtTHh6LVdiSkpzb1dYUFVQeVN6OWVvcXV1ME5ZQkVWTnhCUWNSZVJWcWxFOEVYaTFRMURCYzRMTmIya3ZoeURYd1loWWxZNENJRWxETTR1bkMwYU1oWndIbjZnSllwRU5vQ1Q1Q0hMM0hDX0dVaGNEdkNHUm5rSXVMTzQ0VkxoVm9ycU1HUHh4NWlhUTBINERzdTFEMHdqVTRDNE8ybUlnNG5HZlYxNzVyU0JCV09aUWZCLU9TWEUxNmEzZDFXX0g5LVU2WnpGc2VyLTR1NFQ0cVB2QWFwYml0Wk5YQ3FpRW94aTZFa0piMmpFdkVYM1VkbV9LUDNXYkllSHVpQnA3QW5UX2tkd2c5TjFiTEVkd2RONVJjTkJyX0xBcjVsQlQydWk3dyIsImRldmljZUlkIjoiYW16bjEuYXNrLmRldmljZS5BRURCQlFPNk9XTkNXUk5GNjVSQ1FQWEVRSzZaRVE0UUlJWkdMUDUyUlhHUTZLWVoyM04zWFo3Nk9OUE1UVVdLRDdQR0RET1NXQlIzM0RQRjM3UEJSVU9EUEpOSEpRNlE1NkFSNUlERlpRN1YzNUMyNURNTkU2TFlPTElaTUNXSzZXRjNBUFlUV1JBUzdVQ0pIU0IzS0JQSFhYUUpCQ01PQUpPSlJLRjdIUVBENkhHNlFBTFBTIiwidXNlcklkIjoiYW16bjEuYXNrLmFjY291bnQuQUZWSkRXVFFMMkY2UExJWTNYVU5EVUxDWTZNSENJQlBUN1lKNExCT0E3WDJQQklLUENSTjJaSVZKSTRLRkZDWDdET1ZaMklYQVpOT0dWUzdaREFBR05PV1NCR1JLVjJUNUlQSjZUN0VFN1FJSktON1RNVDRJVVpNWEs0TTMyTk4yTEdSS0FJNVVaR1pVNUdXUVNWR1BGTkQzQUpMNFA2SlNZWVpXU1JRV0JRNkhYTENRU0hPRlpZWUdFNFJTUTQ3WFJJMlY1TDM2RUhTVFRJIn19.juUHKXJK3L5ZsuAXdw2zYvkpD-nBhlVS3IiwCGuLnMLP5gIS322jQV3OUIMGZ3mb6CzjQ96IUl1KtEU3a23g3H9aOBcgI9b7W4IDCcy_xW7qShDb5n0U8GO2DV2ilbiXQGbfIjNPMhy2tIz5pAjVvdHKhw0CX1Go3TIAmboHHro3p_d0ZerMZ85whChtfsxI9Lf0gOUyTTxhwYsrJU1GZU42PwYpdiFevk4V6NKCWWmxSriO2oNniKOimAS2OOsL5w1Hm43KW9YwYOjLUd6FUN5B8wYFUxDoecZrny8C3uq0BhuljQLCOJkAghsrp71O4m3npVcAANOJjiapMd7Xuw';

if (sessionId) { // adjust as needed
  try {
    const token = apiAccessToken || SkillResumptionAPIManager.getToken();
    SkillResumptionAPIManager.postRequest(sessionId, token);
  } catch (error) {
    console.error(`ForegroundSkillHandler: Error occurred when calling Skill Resumption API -> ${error}`);
  }
} else {
  console.log('no valid config variables.');
}
